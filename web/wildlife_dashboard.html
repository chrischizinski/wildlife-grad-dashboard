<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Wildlife Graduate Assistantships Dashboard</title>

  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="assets/css/enhanced-styles.css?v=3" />

  <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
  <script defer src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script defer src="assets/js/dashboard-core.js?v=15"></script>
</head>

<body>
  <div class="app">
    <aside class="app__sidebar">
      <div class="brand">
        <i class="fas fa-seedling" aria-hidden="true"></i>
        <span>Wildlife Grad</span>
      </div>

      <nav class="sidebar-nav" aria-label="Dashboard sections">
        <a class="sidebar-nav__link is-active" href="#overview">Overview</a>
        <a class="sidebar-nav__link" href="#temporal-trends">Temporal Trends</a>
        <a class="sidebar-nav__link" href="#disciplines">Disciplines</a>
        <a class="sidebar-nav__link" href="#compensation">Compensation</a>
        <a class="sidebar-nav__link" href="#geography">Geography</a>
        <a class="sidebar-nav__link" href="#quality">Data Quality</a>
        <a class="sidebar-nav__link" href="#listings">Weekly Spotlight</a>
        <a class="sidebar-nav__link" href="#about">About</a>
      </nav>

      <div class="sidebar-status" id="status-banner">
        <i id="status-icon" class="fas fa-circle"></i>
        <span id="status-text">Loading...</span>
      </div>
    </aside>

    <main class="main">
      <header class="hero">
        <div>
          <h1>Graduate Assistantship Market Dashboard</h1>
          <p>U.S. wildlife and natural resources opportunities by trend, discipline, salary, geography, and data quality.</p>
        </div>
        <div class="hero__meta">
          <span class="pill">Last Updated: <strong id="last-updated-date">—</strong></span>
          <span class="pill">Data Period: <strong id="data-period-range">—</strong></span>
        </div>
      </header>

      <div id="loading" class="state state--loading">
        <i class="fas fa-spinner fa-spin" aria-hidden="true"></i>
        <span>Loading dashboard data...</span>
      </div>

      <div id="error" class="state state--error is-hidden" role="alert">
        <i class="fas fa-exclamation-triangle" aria-hidden="true"></i>
        <span id="error-message">Dashboard failed to load.</span>
      </div>

      <div id="main-content" class="is-hidden">
        <div id="no-data-banner" class="banner is-hidden">No data for current filters</div>

        <section class="section" id="overview">
          <div class="section__head">
            <h2>Overview</h2>
            <p>Topline counts and current market composition.</p>
          </div>
          <div class="kpi-grid">
            <article class="kpi-card">
              <h3>Graduate Positions</h3>
              <p class="kpi-card__value" id="kpi-grad-positions">—</p>
              <p class="kpi-card__reason" id="kpi-grad-positions-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Salary Coverage</h3>
              <p class="kpi-card__value" id="kpi-salary-coverage">—</p>
              <p class="kpi-card__reason" id="kpi-salary-coverage-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Active Disciplines</h3>
              <p class="kpi-card__value" id="kpi-disciplines">—</p>
              <p class="kpi-card__reason" id="kpi-disciplines-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Top Discipline</h3>
              <p class="kpi-card__value" id="kpi-top-discipline">—</p>
              <p class="kpi-card__reason" id="kpi-top-discipline-reason">No rows after filters</p>
            </article>
          </div>
        </section>

        <section class="section" id="temporal-trends">
          <div class="section__head section__head--split">
            <div>
              <h2>Temporal Trends</h2>
              <p>Capture snapshot counts and posting seasonality over time.</p>
            </div>
            <fieldset class="time-toggle" aria-label="Timeframe">
              <label><input type="radio" name="timeframe" value="1_year" checked> 1Y</label>
              <label><input type="radio" name="timeframe" value="all_time"> All</label>
            </fieldset>
          </div>
          <div class="chart-grid chart-grid--single">
            <article class="panel panel--wide">
              <h3>Unique Graduate Positions Captured by Date</h3>
              <div class="panel__body" id="trend-panel">
                <canvas id="trend-chart"></canvas>
              </div>
            </article>
          </div>
          <article class="panel">
            <h3>Posted Position Seasonality (Calendar Month)</h3>
            <div class="panel__body" id="seasonality-panel">
              <canvas id="seasonality-chart"></canvas>
            </div>
          </article>
        </section>

        <section class="section" id="disciplines">
          <div class="section__head">
            <h2>Disciplines</h2>
            <p>Last-capture composition and overall graduate-dataset composition.</p>
          </div>
          <div class="shared-legend" id="discipline-shared-legend"></div>
          <div class="chart-grid">
            <article class="panel">
              <h3>Breakdown During Last Capture</h3>
              <div class="panel__body" id="discipline-latest-panel">
                <canvas id="discipline-latest-chart"></canvas>
              </div>
            </article>
            <article class="panel">
              <h3>Overall Breakdown</h3>
              <div class="panel__body" id="discipline-overall-panel">
                <canvas id="discipline-overall-chart"></canvas>
              </div>
            </article>
          </div>
        </section>

        <section class="section" id="compensation">
          <div class="section__head section__head--split">
            <div>
              <h2>Compensation</h2>
              <p>Salary metrics calculated on salary-parsed postings only. COL-adjusted values are normalized to a Nebraska baseline.</p>
            </div>
            <label class="discipline-control" for="compensation-institution-filter">
              <span>Institution Group</span>
              <select id="compensation-institution-filter" class="discipline-control__select">
                <option value="__all__">Overall</option>
                <option value="big10">Big Ten</option>
                <option value="non_big10">Non-Big Ten / Unknown</option>
              </select>
            </label>
          </div>
          <div class="kpi-grid">
            <article class="kpi-card">
              <h3>Salary Parsed (N / Total)</h3>
              <p class="kpi-card__value" id="kpi-salary-parsed-pct">—</p>
              <p class="kpi-card__reason" id="kpi-salary-parsed-pct-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Salary Sample (N)</h3>
              <p class="kpi-card__value" id="kpi-salary-n">—</p>
              <p class="kpi-card__reason" id="kpi-salary-n-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Median Salary</h3>
              <p class="kpi-card__value" id="kpi-salary-median">—</p>
              <p class="kpi-card__reason" id="kpi-salary-median-reason">Suppressed when N &lt; 5</p>
            </article>
            <article class="kpi-card">
              <h3>Big Ten Tag Coverage</h3>
              <p class="kpi-card__value" id="kpi-big10-coverage">—</p>
              <p class="kpi-card__reason" id="kpi-big10-coverage-reason">No rows after filters</p>
            </article>
          </div>
          <article class="panel">
            <h3>Average Salary by Discipline</h3>
            <div class="panel__body" id="salary-panel">
              <canvas id="salary-chart"></canvas>
            </div>
          </article>
        </section>

        <section class="section" id="geography">
          <div class="section__head section__head--split">
            <div>
              <h2>Geography</h2>
              <p>U.S.-only location concentration and map view.</p>
            </div>
            <label class="discipline-control" for="geography-discipline-filter">
              <span>Discipline</span>
              <select id="geography-discipline-filter" class="discipline-control__select">
                <option value="__all__">Overall</option>
              </select>
            </label>
          </div>
          <div class="kpi-grid kpi-grid--three">
            <article class="kpi-card">
              <h3>U.S.-Mappable (N / Total)</h3>
              <p class="kpi-card__value" id="kpi-location-parsed-pct">—</p>
              <p class="kpi-card__reason" id="kpi-location-parsed-pct-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Top Location</h3>
              <p class="kpi-card__value" id="kpi-top-location">—</p>
              <p class="kpi-card__reason" id="kpi-top-location-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Distinct Locations</h3>
              <p class="kpi-card__value" id="kpi-location-count">—</p>
              <p class="kpi-card__reason" id="kpi-location-count-reason">No rows after filters</p>
            </article>
          </div>
          <div class="chart-grid">
            <article class="panel panel--wide">
              <h3>Geographic Distribution (U.S. only)</h3>
              <div class="panel__body panel__body--map" id="map-panel"></div>
            </article>
            <article class="panel">
              <h3>Top U.S. States</h3>
              <div class="panel__body panel__body--list">
                <ul id="top-locations-list" class="rank-list"></ul>
              </div>
            </article>
          </div>
        </section>

        <section class="section" id="quality">
          <div class="section__head">
            <h2>Data Quality</h2>
            <p>Coverage and recency indicators.</p>
          </div>
          <div class="kpi-grid">
            <article class="kpi-card">
              <h3>Salary Parsed (N / Total)</h3>
              <p class="kpi-card__value" id="kpi-quality-salary">—</p>
              <p class="kpi-card__reason" id="kpi-quality-salary-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Location Parsed (N / Total)</h3>
              <p class="kpi-card__value" id="kpi-quality-location">—</p>
              <p class="kpi-card__reason" id="kpi-quality-location-reason">No rows after filters</p>
            </article>
            <article class="kpi-card">
              <h3>Analytics Timestamp</h3>
              <p class="kpi-card__value" id="kpi-quality-updated">—</p>
              <p class="kpi-card__reason" id="kpi-quality-updated-reason">No timestamp available</p>
            </article>
            <article class="kpi-card">
              <h3>Download Full Data (JSON)</h3>
              <p class="kpi-card__value">
                <a class="kpi-card__action" href="data/dashboard_positions.json" download>Download</a>
              </p>
              <p class="kpi-card__reason">Unified captured dataset used for dashboard metrics</p>
            </article>
          </div>
        </section>

        <section class="section" id="listings">
          <div class="section__head">
            <h2>Weekly Spotlight</h2>
            <p>
              One randomly selected position each week from the most recent
              capture cycle. Full listings remain on the source jobs board.
            </p>
          </div>
          <article class="panel">
            <h3>Random Weekly Position</h3>
            <div class="panel__body panel__body--spotlight" id="weekly-spotlight">
              <div class="panel-empty">No data for current filters</div>
            </div>
          </article>
        </section>

        <section class="section" id="about">
          <div class="section__head">
            <h2>About</h2>
            <p>Scope, intended use, and limitations of this dashboard.</p>
          </div>
          <article class="panel">
            <h3>Informational Use Only</h3>
            <div class="about-copy">
              <p>This dashboard is provided for informational purposes only. It is not legal, financial, academic, or career advice.</p>
              <ul class="about-list">
                <li>Data is compiled from automated capture and classification pipelines and may contain errors, omissions, duplicates, or stale records.</li>
                <li>Posting details (salary, deadlines, eligibility, location, and availability) can change after data is collected.</li>
                <li>No guarantee is made that the dataset is complete, current, or fully accurate at any given time.</li>
                <li>Always verify critical details using the original posting and official institution/employer sources before acting.</li>
              </ul>
            </div>
          </article>
        </section>
      </div>
    </main>
  </div>
</body>

</html>
